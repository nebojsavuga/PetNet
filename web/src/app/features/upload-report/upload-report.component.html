<div class="flex bg-[#19171A] w-[100vw] h-[100vh] relative items-center justify-center z-0 overflow-hidden">
    <img src="../assets/SmallBlueEllipse.png" class="absolute bottom-0 left-0 z-1">
    <img src="../assets/MiddlePinkEllipse.png" class="absolute -bottom-20 z-[2]">
    <img src="../assets/RightGreenEllipse.png" class="absolute -bottom-20 -right-60 z-1">
    <div class="flex flex-col py-[24px] px-[16px] bg-[#19171A] border-[1px] border-[#4C454D] rounded-[8px] z-[3] gap-6 items-center justify-center min-w-[577px] relative">
        @if (uploading && !uploaded) {
            <div class="flex flex-col w-full h-full items-center justify-center gap-4 bg-[#19171A]/90 absolute top-0 left-0 z-[4]">
                <span>
                    <svg class="animate-spin" width="40" height="40" viewBox="0 0 20 20" fill="none"
                      xmlns="http://www.w3.org/2000/svg">
                      <circle opacity="0.5" cx="10" cy="10" r="9" stroke="white" stroke-width="2" />
                      <mask id="path-2-inside-1_2527_20936" fill="white">
                        <path
                          d="M18.4713 13.0345C18.9921 13.221 19.5707 12.9508 19.7043 12.414C20.0052 11.2042 20.078 9.94582 19.9156 8.70384C19.7099 7.12996 19.1325 5.62766 18.2311 4.32117C17.3297 3.01467 16.1303 1.94151 14.7319 1.19042C13.6285 0.597723 12.4262 0.219019 11.1884 0.0708647C10.6392 0.00512742 10.1811 0.450137 10.1706 1.00319C10.1601 1.55625 10.6018 2.00666 11.1492 2.08616C12.0689 2.21971 12.9609 2.51295 13.7841 2.95511C14.9023 3.55575 15.8615 4.41394 16.5823 5.45872C17.3031 6.50351 17.7649 7.70487 17.9294 8.96348C18.0505 9.89002 18.008 10.828 17.8063 11.7352C17.6863 12.2751 17.9506 12.848 18.4713 13.0345Z" />
                      </mask>
                      <path
                        d="M18.4713 13.0345C18.9921 13.221 19.5707 12.9508 19.7043 12.414C20.0052 11.2042 20.078 9.94582 19.9156 8.70384C19.7099 7.12996 19.1325 5.62766 18.2311 4.32117C17.3297 3.01467 16.1303 1.94151 14.7319 1.19042C13.6285 0.597723 12.4262 0.219019 11.1884 0.0708647C10.6392 0.00512742 10.1811 0.450137 10.1706 1.00319C10.1601 1.55625 10.6018 2.00666 11.1492 2.08616C12.0689 2.21971 12.9609 2.51295 13.7841 2.95511C14.9023 3.55575 15.8615 4.41394 16.5823 5.45872C17.3031 6.50351 17.7649 7.70487 17.9294 8.96348C18.0505 9.89002 18.008 10.828 17.8063 11.7352C17.6863 12.2751 17.9506 12.848 18.4713 13.0345Z"
                        stroke="white" stroke-width="4" mask="url(#path-2-inside-1_2527_20936)" />
                    </svg>
                  </span>
                  <p class="font-inter text-[#F1EFF2] font-semibold text-[16px]">Uploading intervention document...</p>
            </div>
        }
        @if (uploaded) {
            <div class="flex flex-col gap-2 w-full h-full bg-[#19171A]/90 rounded-md absolute top-0 left-0 items-center justify-center z-[10]">
                <canvas #lottieCanvas style="width: 100px; height: 100px;"></canvas>
                <p class="font-inter text-[#F1EFF2] font-semibold text-[16px]">Intervention document uploaded!</p>
            </div>
        }
          <p class="font-inter text-[#F1EFF2] font-semibold text-[16px]">Add New Intervention</p>
          <div class="flex flex-col w-full gap-2">
              <p class="font-regular text-[12px] text-[#F1EFF2]">Name</p>
              <input [(ngModel)]="interventionName" type="text" class="border-[1px] border-[#4C454D] rounded-[8px] p-4 bg-[#FFFFFF1A] focus:outline-[#BF38F2] text-[#F1EFF2] placeholder-[#D8D5D9]" placeholder="Intervention name"/>
          </div>  
          <div class="flex flex-col w-full gap-2">
              <p class="font-regular text-[12px] text-[#F1EFF2]">Clinic name</p>
              <input [(ngModel)]="clinicName" type="text" class="border-[1px] border-[#4C454D] rounded-[8px] p-4 bg-[#FFFFFF1A] focus:outline-[#BF38F2] text-[#F1EFF2] placeholder-[#D8D5D9]" placeholder="Intervention name"/>
          </div>  
          <div class="bg-[#262326] border-[#4C454D] border-dashed border-[1px] rounded-[8px] w-full py-10 px-4 flex flex-col items-center justify-center gap-4 min-h-[278px] relative"
              [class.border-[#BF38F2]]="isDragging"
              (dragover)="onDragOver($event)"
              (dragleave)="onDragLeave($event)"
              (drop)="onDrop($event)"
              (click)="fileInput.click()">
              <input type="file" accept="application/pdf" hidden (change)="onFileSelected($event)" #fileInput />
          
              <svg xmlns="http://www.w3.org/2000/svg" width="41" height="40" viewBox="0 0 41 40" fill="none">
                  <path d="M38 22.5V20H30.5V32.5H33V27.5H36.75V25H33V22.5H38ZM24.25 32.5H19.25V20H24.25C25.2443 20.001 26.1975 20.3964 26.9006 21.0994C27.6036 21.8025 27.999 22.7557 28 23.75V28.75C27.999 29.7443 27.6036 30.6975 26.9006 31.4006C26.1975 32.1036 25.2443 32.499 24.25 32.5ZM21.75 30H24.25C24.5815 30 24.8995 29.8683 25.1339 29.6339C25.3683 29.3995 25.5 29.0815 25.5 28.75V23.75C25.5 23.4185 25.3683 23.1005 25.1339 22.8661C24.8995 22.6317 24.5815 22.5 24.25 22.5H21.75V30ZM14.25 20H8V32.5H10.5V28.75H14.25C14.9127 28.749 15.548 28.4853 16.0167 28.0167C16.4853 27.548 16.749 26.9127 16.75 26.25V22.5C16.75 21.837 16.4866 21.2011 16.0178 20.7322C15.5489 20.2634 14.913 20 14.25 20ZM10.5 26.25V22.5H14.25L14.2513 26.25H10.5Z" fill="#D988F7"/>
                  <path d="M28 17.5V12.5C28.0044 12.3357 27.9732 12.1725 27.9084 12.0214C27.8437 11.8704 27.747 11.7351 27.625 11.625L18.875 2.87503C18.7654 2.75236 18.6303 2.6552 18.4791 2.59041C18.3279 2.52562 18.1644 2.49477 18 2.50003H5.5C4.83757 2.502 4.20283 2.76603 3.73442 3.23444C3.26601 3.70286 3.00198 4.33759 3 5.00003V35C3 35.6631 3.26339 36.299 3.73223 36.7678C4.20107 37.2366 4.83696 37.5 5.5 37.5H25.5V35H5.5V5.00003H15.5V12.5C15.502 13.1625 15.766 13.7972 16.2344 14.2656C16.7028 14.734 17.3376 14.998 18 15H25.5V17.5H28ZM18 12.5V5.50003L25 12.5H18Z" fill="#D988F7"/>
              </svg>
            @if (!selectedFile) {
                <p class="text-[#F1EFF2] font-inter text-[20px] font-bold">Add PDF report</p>
                <p class="text-[#D8D5D9] font-inter text-[16px]">
                    Drag your PDF report file here or click to browse and add one.
                </p>
            } @else {
                <p class="text-[#F1EFF2] font-inter text-[20px] font-bold">PDF report added</p>
                <p class="text-[#D8D5D9] font-inter text-[16px]">
                    Selected: {{ selectedFile!.name }}
                </p>
            }
          </div>
  
          <button (click)="uploadInterventionPdf()" 
            [disabled]="!selectedFile || interventionName === '' || clinicName === ''"
            [ngClass]="{'text-[#F1EFF2] bg-[#BF38F2]' : selectedFile && interventionName !== '' && clinicName !== '',
                'text-[#988F99] bg-[#732291] cursor-not-allowed' : !selectedFile || interventionName === '' || clinicName === ''
            }"  
          class="flex w-full p-3 rounded-[8px] items-center justify-center">
              Add Intervention
          </button>
      </div>
  </div>